async function sendData() {
  const data = {
    apartment: document.getElementById('apartment').value,
    cold: document.getElementById('cold').value,
    hot: document.getElementById('hot').value,
    lastname: document.getElementById('lastname').value || ''
  };

  // Валидация
  if (!data.apartment || !data.cold || !data.hot) {
    Telegram.WebApp.showAlert("❌ Заполните все поля!");
    return;
  }

  Telegram.WebApp.MainButton.showProgress(true);
  
  try {
    // 1. Отправка через Telegram API
    Telegram.WebApp.sendData(JSON.stringify(data));
    
    // 2. Дублирующая отправка напрямую на GAS
    const GAS_URL = 'https://script.google.com/macros/s/AKfycbyeA6NbOUlL0WWWirQK4DdUehqXWEiH18G5HxWVAlSb7-_ylgBREAZ-Xrro-uHbo3FN/exec';
    const response = await fetch(GAS_URL, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(data)
    });
    
    const result = await response.json();
    console.log("Ответ сервера:", result);
    
    if (result.status === "success") {
      Telegram.WebApp.showAlert("✅ Данные сохранены!", () => {
        Telegram.WebApp.close();
      });
    } else {
      throw new Error(result.message || "Ошибка сервера");
    }
  } catch (e) {
    Telegram.WebApp.showAlert(`❌ Ошибка: ${e.message}`);
    console.error("Ошибка:", e);
  } finally {
    Telegram.WebApp.MainButton.hideProgress();
  }
}
